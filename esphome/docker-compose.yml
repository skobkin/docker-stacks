# https://esphome.io/guides/getting_started_command_line/#esphome-device-builder-docker

services:
  esphome:
    container_name: esphome
    image: 'ghcr.io/esphome/esphome:${IMAGE_TAG:-latest}'
    volumes:
      - '${HOST_CONFIG_DIR:-./config}:/config'
      - '/etc/localtime:/etc/localtime:ro'
    ports:
      - '${HOST_BIND_IP:-127.0.0.1}:${HOST_PORT:-6052}:6052'
    restart: unless-stopped
    network_mode: '${NETWORK_MODE:-bridge}'
    env_file: .env
    logging:
      driver: 'json-file'
      options:
        max-size: '${LOG_MAX_SIZE:-5m}'
        max-file: '${LOG_MAX_FILE:-5}'
